# 混合1

## 混合状态

为了启用混合, 必须填写 `D3D12_BLEND_DESC` 结构体

```cc
typedef struct D3D12_BLEND_DESC {
    BOOL AlphaToCoverageEnable = false;
    BOOL IndependentBlendEnable = false;
    D3D12_RENDER_TARGET_BLEND_DESC RenderTarget[8];
} D3D12_BLEND_DESC;
```

| 字段                     | 作用                                                         |
| ------------------------ | ------------------------------------------------------------ |
| `AlphaToCoverageEnable`  | 指定为true，则启用 `alpha-to-coverage` 功能，<br />这是一种在渲染叶片或门等纹理时极其有用的一种多重采样技术 |
| `IndependentBlendEnable` | Direct3D最多可同时支持8个渲染目标, 若为 `false`. 则所有渲染目标使用 `RenderTarget[0]` 方式混合<br />否则 8 个渲染目标使用不同的混合方式 |
| `RenderTarget`           | 渲染目标的混合方式. 使用 `D3D12_RENDER_TARGET_BLEND_DESC`    |

**D3D12_RENDER_TARGET_BLEND_DESC**

```cc
typedef enum D3D12_COLOR_WRITE_ENABLE {
  D3D12_COLOR_WRITE_ENABLE_RED = 1,		// 允许写入 R 通道
  D3D12_COLOR_WRITE_ENABLE_GREEN = 2,	// 允许写入 G 通道
  D3D12_COLOR_WRITE_ENABLE_BLUE = 4,	// 允许写入 B 通道
  D3D12_COLOR_WRITE_ENABLE_ALPHA = 8,	// 允许写入 A 通道
  D3D12_COLOR_WRITE_ENABLE_ALL			// 允许写入 RGBA 通道
} ;

typedef struct D3D12_RENDER_TARGET_BLEND_DESC {
  BOOL           BlendEnable;		// 是否启用混合
  BOOL           LogicOpEnable;		// 是否使用逻辑混合
  D3D12_BLEND    SrcBlend;			// SRC-rgb 混合因子
  D3D12_BLEND    DestBlend;			// DST-rgb 混合因子
  D3D12_BLEND_OP BlendOp;			// rgb 混合操作符
  D3D12_BLEND    SrcBlendAlpha;		// SRC-a 混合因子
  D3D12_BLEND    DestBlendAlpha;	// DST-a 混合因子
  D3D12_BLEND_OP BlendOpAlpha;		// a 混合操作符
  D3D12_LOGIC_OP LogicOp;			// 如果启用逻辑混合, 则逻辑混合的方式
  UINT8          RenderTargetWriteMask; // 是否写入颜色.D3D12_COLOR_WRITE_ENABLE 位组合 
} D3D12_RENDER_TARGET_BLEND_DESC;
```

